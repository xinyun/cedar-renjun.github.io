
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Doxygen 10 分钟入门教程 - Enjoy Programming, Enjoy Life</title>
  <meta name="author" content="Cedar">

  
  <meta name="description" content="综述 本文试图在10分钟内，帮助您了解文档生成工具Doxygen的基本概念，并熟悉Doxygen的使用规则，同时给予深入学习的一些方向性建议。 因为本文仅仅是帮助初学者入门，所以选例方面较为简单，缺乏广度和深度。后期会编写一些深度学习Doxygen的文章，敬请关注 Doxygen是什么东西？ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cedar-renjun.github.io/blog/2014/03/21/learn-doxygen-in-10-minutes">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Enjoy Programming, Enjoy Life" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Enjoy Programming, Enjoy Life</a></h1>
  
    <h2>Focus on Embedded System</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cedar-renjun.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Doxygen 10 分钟入门教程</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-21T22:02:07+08:00" pubdate data-updated="true">Mar 21<span>st</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>综述</h2>

<p>本文试图在10分钟内，帮助您了解文档生成工具Doxygen的基本概念，并熟悉Doxygen的使用规则，同时给予深入学习的一些方向性建议。</p>

<p>因为本文仅仅是帮助初学者入门，所以选例方面较为简单，缺乏广度和深度。后期会编写一些深度学习Doxygen的文章，敬请关注</p>

<h2>Doxygen是什么东西？</h2>

<p>Doxygen是一款文档生成工具，它可以从代码中提取出相应的文档，并组织，输出成各种漂亮的文档（如HTML，PDF，RTF等）</p>

<p>有了Doxygen工具，程序员便可以在写代码的时候，直接内嵌文档，再也不需要为某个功能代码单独写文档，从而最大程度的保持了文档和代码的统一性</p>

<p>另外，Doxygen 1.8.x版本中增加对markdown的支持，也支持内嵌部分HTML标签，从而极大的简化了文档编写难度，甚至，您可以用Doxygen生成一个静态的网站。</p>

<p>目前Doxygen支持C/C++，Objective-C, C#，PHP等语言，支持多平台(Mac OS, Linux, Windows)，更多信息，请参考<a href="http://www.stack.nl/~dimitri/doxygen/index.html">Doxygen官方介绍</a></p>

<!-- more -->


<h2>Doxygen适合什么人？</h2>

<p>适合对代码文档有一定要求的程序员</p>

<p><strong>PS：</strong>能看到这里的程序员，一定是位有追求，有理想的工程狮，哈哈，就你了，go on please</p>

<h2>开始学习Doxygen</h2>

<p><strong>注：</strong>在继续阅读之前，请确保您</p>

<ul>
<li>知道如何在windows环境下调出命令窗口</li>
<li>具有简单的编程基础</li>
</ul>


<h3>下载和安装</h3>

<p>doxygen最新版为1.8.6版本，下载链接如下</p>

<pre><code>http://sourceforge.net/projects/doxygen/files/latest/download?source=files
</code></pre>

<p>下载完成后，双击安装，采用默认设置就ok，这里不做过多介绍</p>

<h3>准备源文件</h3>

<p>这里准备了三个简单的C语言源代码</p>

<pre><code>main.c  // 演示如何调用Dev中的设备接口
dev.c   // Dev设备的实现代码
dev.h   // Dev设备的操作接口
</code></pre>

<p>具体代码如下：</p>

<figure class='code'><figcaption><span> (main.c)</span> <a href='/downloads/code/2014/03/21/OriginSourceCode/main.c'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &quot;dev.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define CNT_MAX 10</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">DEV_Example</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">Dev_Init</span><span class="p">();</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">CNT_MAX</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Dev_PrintInt</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">Dev_Close</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">DEV_Example</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span> (dev.c)</span> <a href='/downloads/code/2014/03/21/OriginSourceCode/dev.c'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">void</span> <span class="nf">Dev_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Dev Initialize OK!</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">Dev_PrintInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">number</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Print IntType number: %d</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">Dev_Close</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Dev Close OK!</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span> (dev.h)</span> <a href='/downloads/code/2014/03/21/OriginSourceCode/dev.h'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;stdio.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">extern</span> <span class="kt">void</span> <span class="nf">Dev_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span class='line'><span class="k">extern</span> <span class="kt">int</span> <span class="nf">Dev_PrintInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">number</span><span class="p">);</span>
</span><span class='line'><span class="k">extern</span> <span class="kt">void</span> <span class="nf">Dev_Close</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>将这3个源文件放在某个文件夹内，这里以GettingStart文件夹为例，其目录组织结构如下所示</p>

<pre><code>GettingStart
   |-- dev.c
   |-- dev.h
   |-- main.c
</code></pre>

<h3>第一次尝试</h3>

<p>接下来，我们看看，不编写任何注释的情况下，Doxygen会怎么生成文档</p>

<p>打开命令行(powershell)窗口，并CD到GettingStart目录下，输入下面命令</p>

<pre><code>doxygen -g  
</code></pre>

<p>Powershell的返回信息如下，同时，我们的GettingStart目录下增加了一个名叫Doxyfile的文件(注意第21行)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="n">F</span><span class="err">:</span><span class="p">\</span><span class="n">Doxygen_Demo</span><span class="p">\</span><span class="n">GettingStart</span><span class="p">&gt;</span> <span class="n">doxygen</span> <span class="n">-g</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">Configuration</span> <span class="n">file</span> <span class="p">`</span><span class="n">Doxyfile</span><span class="err">&#39;</span> <span class="n">created</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="n">Now</span> <span class="n">edit</span> <span class="n">the</span> <span class="n">configuration</span> <span class="n">file</span> <span class="n">and</span> <span class="n">enter</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">doxygen</span> <span class="n">Doxyfile</span>
</span><span class='line'>
</span><span class='line'><span class="n">to</span> <span class="n">generate</span> <span class="n">the</span> <span class="n">documentation</span> <span class="k">for</span> <span class="n">your</span> <span class="n">project</span>
</span><span class='line'>
</span><span class='line'><span class="n">PS</span> <span class="n">F</span><span class="err">:</span><span class="p">\</span><span class="n">Doxygen_Demo</span><span class="p">\</span><span class="n">GettingStart</span><span class="p">&gt;</span> <span class="n">ls</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="n">dir</span><span class="err">:</span> <span class="n">F</span><span class="err">:</span><span class="p">\</span><span class="n">Doxygen_Demo</span><span class="p">\</span><span class="n">GettingStart</span>
</span><span class='line'>
</span><span class='line'><span class="n">Mode</span>                <span class="n">LastWriteTime</span>     <span class="n">Length</span> <span class="n">Name</span>
</span><span class='line'><span class="p">----</span>                <span class="p">-------------</span>     <span class="p">------</span> <span class="p">----</span>
</span><span class='line'><span class="n">-a</span><span class="p">---</span>         <span class="n">2014</span><span class="p">/</span><span class="n">3</span><span class="p">/</span><span class="n">22</span>     <span class="n">15</span><span class="err">:</span><span class="n">44</span>        <span class="n">212</span> <span class="n">dev</span><span class="p">.</span><span class="n">c</span>
</span><span class='line'><span class="n">-a</span><span class="p">---</span>         <span class="n">2014</span><span class="p">/</span><span class="n">3</span><span class="p">/</span><span class="n">22</span>     <span class="n">16</span><span class="err">:</span><span class="n">14</span>        <span class="n">119</span> <span class="n">dev</span><span class="p">.</span><span class="n">h</span>
</span><span class='line'><span class="n">-a</span><span class="p">---</span>         <span class="n">2014</span><span class="p">/</span><span class="n">3</span><span class="p">/</span><span class="n">22</span>     <span class="n">16</span><span class="err">:</span><span class="n">46</span>     <span class="n">103431</span> <span class="n">Doxyfile</span>
</span><span class='line'><span class="n">-a</span><span class="p">---</span>         <span class="n">2014</span><span class="p">/</span><span class="n">3</span><span class="p">/</span><span class="n">22</span>     <span class="n">15</span><span class="err">:</span><span class="n">56</span>        <span class="n">236</span> <span class="n">main</span><span class="p">.</span><span class="n">c</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个Doxyfile就是Doxygen工程的配置文件，里面含有一些配置信息</p>

<p>接下来我们做一些修改</p>

<p>在默认情况下，Doxygen会输出HTML和LATEX形式文档，LATEX主要用于生成PDF，这里暂时不需要，所以我们禁用LATEX输出</p>

<p>在Doxyfile中将下面一行</p>

<pre><code>GENERATE_LATEX         = YES
</code></pre>

<p>修改为</p>

<pre><code>GENERATE_LATEX         = NO
</code></pre>

<p>接下来，我们修改HTML的显示方式，将下面两行代码</p>

<pre><code>DISABLE_INDEX          = NO  
GENERATE_TREEVIEW      = NO  
</code></pre>

<p>修改为</p>

<pre><code>DISABLE_INDEX          = YES  
GENERATE_TREEVIEW      = YES  
</code></pre>

<p>至于为什么修改，暂时不用深究，我们后期再讨论</p>

<p>现在我们就可以输出文档了，在命令行（powershell)下输入</p>

<pre><code>doxygen .\Doxyfile
</code></pre>

<p><strong>注：</strong>这个命令称为编译，下文直接用<strong>编译</strong>来代替表示这个指令</p>

<p>这时，Doxygen会从我们的代码中提取相应的文档，并生成HTML文件，进入GettingStart
文件夹内，双击打开HTML文件夹下的index.html文件</p>

<p>点击<a href="http://cedar-renjun.github.io/assets/2014/03/21/html_output_1/index.html">这里</a>查看</p>

<p>可以看到，当Doxygen对没有任何注释的代码，也可以生成对应的文档框架，不过，仅仅是框架而已，没有太大作用。Doxygen针对这种情况，专门设置了一个选项<code>EXTRACT_ALL</code>，默认情况下为<code>NO</code>状态，手工设置为YES后，Doxygen会尽可以的从代码中提取信息，这里我们将Doxyfile中的</p>

<pre><code>EXTRACT_ALL            = NO
</code></pre>

<p>改为</p>

<pre><code>EXTRACT_ALL            = YES
</code></pre>

<p>然后再次编译，前后输出结果，对比如下：</p>

<p><img src="http://cedar-renjun.github.io/images/2014/03/21/NakeCodeComp.png" alt="对比结果" /></p>

<p><strong>注：</strong>请点击<a href="http://cedar-renjun.github.io/assets/2014/03/21/html_output_2/index.html">这里</a>查看<code>EXTRACT_ALL = YES</code>的输出结果</p>

<h3>最终效果展示</h3>

<p>接下来，我们为代码中增加对应的描述信息</p>

<p>Doxygen制定了一套注释规范，在保证正确输出文档的同时，也兼顾了良好的可读性。对编程人员来说，只需在编写注释的时候，稍微注意格式，即可生成非常优秀的文档，额外增加的工作量可忽略不计。</p>

<p>下面就是某个函数的Doxygen注释</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="c1">//*****************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \brief Write one byte to special register</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! This function is to write one byte to LIS302DL register,one byte will be</span>
</span><span class='line'><span class="c1">//! writen in appointed address.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \param RegAddr specifies the target register address.</span>
</span><span class='line'><span class="c1">//! \param Data is the data written to target register.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \return Indicate the status of operation which can be one of the following</span>
</span><span class='line'><span class="c1">//! value \b SUCCESS or  \b FAILURE .</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \note This function is used by internal, user MUST NOT call it in your </span>
</span><span class='line'><span class="c1">//!  Application.</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//*****************************************************************************</span>
</span><span class='line'><span class="k">static</span> <span class="n">Result</span> <span class="nf">_I2CRegWriteByte</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">RegAddr</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">Data</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">Result</span> <span class="n">retv</span> <span class="o">=</span> <span class="n">SUCCESS</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Begin to I2C Transfer</span>
</span><span class='line'>    <span class="c1">// first send START signal to control I2C bus</span>
</span><span class='line'>    <span class="c1">// then send 7-bit address and R/W bit to I2C salve</span>
</span><span class='line'>    <span class="c1">// at last send target register address</span>
</span><span class='line'>    <span class="n">retv</span> <span class="o">=</span> <span class="n">xI2CMasterWriteS1</span><span class="p">(</span><span class="n">LIS302DL_PIN_I2C_PORT</span><span class="p">,</span> <span class="n">LIS302DL_I2C_ADDR</span><span class="p">,</span>
</span><span class='line'>            <span class="n">RegAddr</span><span class="p">,</span> <span class="n">I2C_TRAN_NOT_END</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="n">retv</span> <span class="o">!=</span> <span class="n">SUCCESS</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="n">FAILURE</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Send the wanted data to I2C bus</span>
</span><span class='line'>    <span class="c1">// then Send STOP signal to release I2C bus</span>
</span><span class='line'>    <span class="n">retv</span> <span class="o">=</span> <span class="n">xI2CMasterWriteS2</span><span class="p">(</span><span class="n">LIS302DL_PIN_I2C_PORT</span><span class="p">,</span> <span class="n">Data</span><span class="p">,</span> <span class="n">I2C_TRAN_END</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="n">retv</span> <span class="o">!=</span> <span class="n">SUCCESS</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="n">FAILURE</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span><span class="p">(</span><span class="n">SUCCESS</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>我们可以看到，程序代码可读性非常好，即便没有生成单独的文档，任何具有一定英文基础的同学都可以
轻松的了解到函数的用法和入口参数，注意事项等信息。</p>

<p>接下来，我们采用Doxygen语法为main.c dev.c dev.h添加注释信息，完成后的效果如下所示：</p>

<figure class='code'><figcaption><span> (main.c)</span> <a href='/downloads/code/2014/03/21/FinalSourceCode/main.c'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \file main.c </span>
</span><span class='line'><span class="c1">//! This is an simple example show developer how to use dev api to print int number.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \author    Cedar</span>
</span><span class='line'><span class="c1">//! \version   V1.0</span>
</span><span class='line'><span class="c1">//! \date      2014-03-23</span>
</span><span class='line'><span class="c1">//! \copyright GNU Public License V3.0</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#include &quot;dev.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define CNT_MAX  10  </span><span class="c1">//!&lt; The maxium number of print</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//! Simple device example.</span>
</span><span class='line'><span class="kt">void</span> <span class="nf">DEV_Example</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">Dev_Init</span><span class="p">();</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">CNT_MAX</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Dev_PrintInt</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">Dev_Close</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//! Application Entry</span>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">DEV_Example</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span> (dev.c)</span> <a href='/downloads/code/2014/03/21/FinalSourceCode/dev.c'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \file dev.c </span>
</span><span class='line'><span class="c1">//! the implement of simple device.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \author    Cedar</span>
</span><span class='line'><span class="c1">//! \version   V1.0</span>
</span><span class='line'><span class="c1">//! \date      2014-03-23</span>
</span><span class='line'><span class="c1">//! \copyright GNU Public License V3.0</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//! Simple device status.</span>
</span><span class='line'><span class="c1">//! </span>
</span><span class='line'><span class="c1">//! \warning This variable is designed for internal, user \b MUST \b NOT call it.</span>
</span><span class='line'><span class="k">static</span> <span class="kt">int</span> <span class="n">__DevStatus</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">Dev_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">// Print debug information</span>
</span><span class='line'>  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Dev Initialize OK!</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="n">Dev_PrintInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">number</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Print IntType number: %d</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="n">Dev_StatusCheck</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">return</span>   <span class="p">(</span><span class="n">__DevStatus</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">Dev_Close</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Dev Close OK!</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span> (dev.h)</span> <a href='/downloads/code/2014/03/21/FinalSourceCode/dev.h'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \file dev.h</span>
</span><span class='line'><span class="c1">//!  Simple device user API.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \author    Cedar</span>
</span><span class='line'><span class="c1">//! \version   V1.0</span>
</span><span class='line'><span class="c1">//! \date      2014-03-23</span>
</span><span class='line'><span class="c1">//! \copyright GNU Public License V3.0</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#include &lt;stdio.h&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \addtogroup Dev_Status  Simple device status information.</span>
</span><span class='line'><span class="c1">//! @{</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define DEV_ON      ((int)(1))      </span><span class="c1">//!&lt; Simple device is power on.</span>
</span><span class='line'><span class="cp">#define DEV_OFF     ((int)(0))      </span><span class="c1">//!&lt; Simple device is power off.</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! @}</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \addtogroup Dev_API  Simple device APIs list.</span>
</span><span class='line'><span class="c1">//! @{</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \brief  Initialize simple device.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \param  none.</span>
</span><span class='line'><span class="c1">//! \retval none.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \note   This function \b MUST be called first before others function.</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="k">extern</span> <span class="kt">void</span> <span class="nf">Dev_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \brief  Print Int number to terimal device.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \param  [in] number is the data you want to print.</span>
</span><span class='line'><span class="c1">//! \retval the number of print information, in bytes. return zero indicate print error !.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \note</span>
</span><span class='line'><span class="c1">//! * Be sure you have called \ref Dev_Init function before call this fuction.</span>
</span><span class='line'><span class="c1">//! * Remember to check return value.</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="k">extern</span> <span class="kt">int</span> <span class="nf">Dev_PrintInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">number</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \brief  Check simple device status information.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \param  none.</span>
</span><span class='line'><span class="c1">//! \retval status information of simple device, which can be one of the following value:\n</span>
</span><span class='line'><span class="c1">//!  - \ref DEV_ON</span>
</span><span class='line'><span class="c1">//!  - \ref DEV_OFF</span>
</span><span class='line'><span class="c1">//!  \n More information, please reference \ref Dev_Status.</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="k">extern</span> <span class="kt">int</span> <span class="nf">Dev_StatusCheck</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \brief  Close simple device.</span>
</span><span class='line'><span class="c1">//!</span>
</span><span class='line'><span class="c1">//! \param  none.</span>
</span><span class='line'><span class="c1">//! \retval none.</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="k">extern</span> <span class="kt">void</span> <span class="nf">Dev_Close</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! @}</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//! \example main.c</span>
</span><span class='line'><span class="c1">//!  Show how to use simple device to print int number.</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//***************************************************************************************</span>
</span></code></pre></td></tr></table></div></figure>


<p>用Doxygen编译后，生成的HTML文档如下所示：</p>

<p><img src="http://cedar-renjun.github.io/images/2014/03/21/Doxygen_Final_Demo.jpg" alt="最终效果" /></p>

<p><strong>注：</strong>请点击<a href="http://cedar-renjun.github.io/assets/2014/03/21/html_output_final/index.html">这里</a>查看详细的输出文档。</p>

<p>Doxygen把代码中的文件，例子，函数，宏等信息提取出来，一目了然</p>

<p>这里要说一下，如果没有Doxygen，我们该怎么做呢？</p>

<p>很多人会用SourceInsight这个代码阅读工具来辅助阅读，功能非常强大，但你电脑上必须装SI，否则没法阅读，这就限制了使用范围，从这里可以看到Doxygen的优势所在：提取代码文档，并将所有部分链接起来，形成统一整体</p>

<p>也许还有人会说，SI也可以生成继承图，调用图等图标，Doxygen可以吗？完全可以的，借助于Dot工具，Doxygen可以生成各种关系图表</p>

<p><strong>注：</strong>Doxygen配合Dot工具生成图表以及Dot工具的用法，后期专门写一篇文章来介绍</p>

<h3>一步一步跟我学Doxygen</h3>

<p>现在让我们开始从0开始，一步步为代码添加注释信息，最终生成上面所看到的效果</p>

<p>首先为函数添加注释信息，这是必须要做的。这里有个选择性问题，添加到哪里呢？.c文件？.h文件？</p>

<p>一般来说：</p>

<ul>
<li>.h文件代表模块对外的接口最小信息，面向模块使用者</li>
<li>.c文件代表模块的实现代码，面向的是开发者</li>
</ul>


<p>在实际编程中，事先约定各个模块间的接口，然后将不同的模块分配给不同的开发者，于此同时，测试人员根据接口要求，编写测试代码，这就完全保证了并发编程和白盒测试要求。</p>

<p>这里我们可以看到，文档主要是用来描述接口信息的，所以，我对代码的注释规定如下：</p>

<ul>
<li>模块对外接口，仅在.h中提供注释信息</li>
<li>模块内部辅助函数，全部用static设为私有函数，同时仅在.c中保留注释信息</li>
</ul>


<p>当然，您也可以同时为.c .h的接口函数编写两份完全一样的注释信息，但这么做，您会同时维护两份信息，出错的概率会更大些。</p>

<p>确定了注释位置，下一步考虑一个函数需要哪些信息</p>

<p>一般来说，需要函数功能，入口参数，返回值，注意事项，某些时候还需要说明上下文环境，从而保证函数能正确执行</p>

<p>比如这个函数</p>

<pre><code>extern int Dev_PrintInt(int number); 
</code></pre>

<p>它的功能就是打印一个整形数据，传入参数为整数，返回的是成功打印的数据长度（字节为单位），同时呢，我们在调用这个函数之前，必须要先初始化Dev设备</p>

<p>ok，这就是所有接口信息，稍微规范一下，就变成了下面的样子</p>

<pre><code>// 函数功能：打印整数
// 入口参数：number为一个整数类型
// 返回结构：返回的是成功打印的数据长度（字节为单位）
// 注意事项：
//          1：在调用本函数前，请确保已经调用Dev_Init初始化设备
//          2：请注意函数返回值，如果该值为0，则说明函数执行失败

extern int Dev_PrintInt(int number); 
</code></pre>

<p>用英文来书写呢，则变成下面的样子</p>

<pre><code>//***************************************************************************************
//
// brief  : Print Int number to terimal device.
//
// param  : number is the data you want to print.
// retval : the number of print information, in bytes. return zero indicate print error !
//
// Note:
//      * Be sure you have called \ref Dev_Init function before call this fuction.
//      * Remember to check return value.
//
//***************************************************************************************
extern int Dev_PrintInt(int number);
</code></pre>

<p>注释信息写完了，一般来说，函数能达到这种信息程度就ok了，但既然要生成文档，就不得不考虑一个问题</p>

<p>如果你是Doxygen作者，怎么从上面的注释里面提取信息呢，信息那么多，有<code>*</code>号，有各种文字信息。</p>

<p>你可以将所有的注释信息都输出出来，但这么做，等于没有分类整理，同时也包含了杂乱信息，比如一排<code>*</code></p>

<p>另外一个解决方法是：设置某些特殊字符，比如<code>function</code>表示，一旦检测到这个特殊标记，则认为是接下来
的一行是函数功能描述。但这么做，万一用户的注释里面出现很多个function，你怎么识别哪个是普通文本，
哪个是特殊标记？</p>

<p>也许你会说了，可以采用$FUNCTION$这种形式啊，恩，这么做是可行的，可以确保识别出来特殊标记</p>

<p>接下来，还有一个问题，我们上面的注释中，有很多<code>*</code>号，仅仅起到美观和格式化的作用，当然不希望在
输出文档中显示这些东西，问题是你怎么识别这些符号，并不显示呢？也许你会说，可以强制规定注释的
格式，不让用户在代码中写很多<code>*</code>，ok，假设用户同意这么做。那接下来呢，如果我希望在代码中写某些话
，但是不希望输出到文档中，比如“祝某党长命百岁，领导是2B”等等，你又该怎么做呢？</p>

<p>正向思考遇到问题时，不妨反向考虑，这是谁的问题：是我设计思路的问题还是用户用法的问题？</p>

<p>困难重重，肯定是设计思路的问题</p>

<p>如果设计一个标记符，将普通注释和要生成的文档注释区分开来，就能解决问题了。</p>

<p>Doxygen的用法，说白了，就是为了解决上面提到的两个问题：</p>

<pre><code>怎么区分普通注释和输出注释  
怎么在输出注释里面，识别特殊标记和普通文本  
</code></pre>

<p>ok，讲到这里，基本把Doxygen的机制给解释清楚了，如果您还不理解，最简单的方法就是把你假设为Doxygen
作者，重新推演一遍。</p>

<p>下面咱们看看Doxygen怎么解决这两个问题的</p>

<p><strong>区分普通注释和特殊注释</strong></p>

<p>对于C/C++语言来说，注释形式有两种</p>

<pre><code>//
/* */
</code></pre>

<p>Doxygen通过在这里增加<code>*</code>，<code>/</code>，<code>!</code>来作为特殊标记，比如</p>

<p>对于<code>/* */</code>这种注释来说，正常注释为</p>

<pre><code>/*
 * 正常注释
 */
</code></pre>

<p>Doxygen在注释第一个<code>*</code>后，设置<code>*</code>或<code>!</code>作为标志，如果检测到有这些，
就将接下来的注释作为导出文档来解释</p>

<pre><code>/**
 * 要输出成文档的注释
 */

 或者

/*!
 * 要输出成文档的注释
 */
</code></pre>

<p>同时，中间的<code>*</code>号可以省略，像这样</p>

<pre><code>/**
   要输出成文档的注释
 */

 或者

/*!
   要输出成文档的注释
 */
</code></pre>

<p>对于<code>//</code>这种类型的注释，Doxygen在第二个<code>/</code>后，增加<code>!</code>或<code>/</code>作为区分标志，如果检测到有这些，
就将接下来的注释作为导出文档来解释</p>

<pre><code>/// 要输出成文档的注释

或者

//! 要输出成文档的注释
</code></pre>

<p>对于这种呢，有一个潜在的问题，很多时候，我们需要在把注释放到后面，比如下面这种</p>

<pre><code>#define DEV_ON      ((int)(1))      //! Simple device is power on.
#define DEV_OFF     ((int)(0))      //! Simple device is power off.
</code></pre>

<p>如果真要这么写的话，Doxygen会把<code>//! Simple device is power on.</code>当做<code>DEV_OFF</code>的注释，这
当然不是我们所希望的! 怎么办呢，只好再加一个特殊标记了，Doxygen针对这种情况，需要在<code>!</code>后
再增加一个<code>&lt;</code>标志符，如果检测到这个，则认为这个注释是为前面代码准备的，所以，上面的注释应该
这么写</p>

<pre><code>#define DEV_ON      ((int)(1))      //!&lt; Simple device is power on.
#define DEV_OFF     ((int)(0))      //!&lt; Simple device is power off.
</code></pre>

<p>做到这里，Doxygen就可以正确区分普通注释和特殊注释了，^_^</p>

<p>更详细的信息，请参考<a href="http://www.stack.nl/~dimitri/doxygen/manual/docblocks.html">Doxygen注释规范</a></p>

<p><strong>区分特殊标记符和普通文本</strong></p>

<p>ok，现在可以识别出了普通注释和特殊注释，接下来，Doxygen是怎么从特殊注释里面提取信息的呢</p>

<p>比如</p>

<p><img src="http://cedar-renjun.github.io/images/2014/03/21/Doxygen_Final_Demo.jpg" alt="最终效果" /></p>

<p>注意左边导航栏，Doxygen怎么识别出这是一个函数/宏呢？答案还是采用特殊标记</p>

<p><strong>注：</strong>提到特殊标记，其实吧，编程语言非常常用，比如HTML就是典型的markup语言，一堆一堆的括号，看着就头疼</p>

<p>Doxygen采用<code>\</code>和<code>@</code>作为特殊标记符，当在特殊注释里面检测到了特殊标记符，则接下来检测紧跟单词是不是Doxygen
事先规定好的，如果是，则将按照特定的规则来解释紧跟着的注释；如果不是呢，则将<code>\</code>和<code>@</code>解释为普通文本，聪明吧</p>

<p>可能有点拗口，下面给你个例子</p>

<pre><code>//***************************************************************************************
//
//! \brief  Print Int number to terimal device.
//!
//! \param  [in] number is the data you want to print.
//! \retval the number of print information, in bytes. return zero indicate print error !.
//!
//! \note
//! * Be sure you have called \ref Dev_Init function before call this fuction.
//! * Remember to check return value.
//
//***************************************************************************************
extern int Dev_PrintInt(int number);
</code></pre>

<p>看到了吧，这里的<code>\brief</code>和<code>\param</code>都是特殊符号，表示简要描述和参数。万一你小手一抖，把<code>\param</code>
写成了<code>\parame</code>，那就悲剧了，因为Doxygen不认识<code>parame</code>，所以它会把这句话当做是普通文本来处理</p>

<p>其实，上面的<code>\</code>换成<code>@</code>也是ok的，如下所示</p>

<pre><code>//***************************************************************************************
//
//! @brief  Print Int number to terimal device.
//!
//! @param  [in] number is the data you want to print.
//! @retval the number of print information, in bytes. return zero indicate print error !.
//!
//! @note
//! * Be sure you have called \ref Dev_Init function before call this fuction.
//! * Remember to check return value.
//
//***************************************************************************************
extern int Dev_PrintInt(int number);
</code></pre>

<p>相信某些玩过ARM芯片的，对这类注释非常熟悉，官方库都是采用Doxygen语法规则注释的，我也写过一套LPC17xx
的库 <a href="https://github.com/cedar-renjun/Cox_LPC17xx">https://github.com/cedar-renjun/Cox_LPC17xx</a></p>

<p>那么，我们怎么知道Doxygen认识哪些符号呢，参考Doxygen自带手册啊，<a href="http://www.stack.nl/~dimitri/doxygen/manual/commands.html">Special Commands</a>章节</p>

<p>授之于鱼，不如授之于渔，该说的多介绍完了，至于具体的指令含义和用法，自己慢慢看手册呗</p>

<p>注：点击<a href="http://cedar-renjun.github.io/assets/2014/03/21/DoxygenGettingStart.zip">这里</a>下载GettingStart的压缩包，包含源码，HTML输出文档，配置脚本
如果在看脚本的时候遇到问题，请参考<a href="http://www.stack.nl/~dimitri/doxygen/manual/config.html">这里</a></p>

<h3>深入研究</h3>

<p>不好意思，文章有点长，估计过了10分钟，so bad，o(╯□╰)o</p>

<p>根据20/80原则，一个软件，常用的仅仅是20%的功能，其余80%功能是极少用到的</p>

<p>上面仅仅介绍了Doxygen的设计思想和学习范例，抓住了纲领，相信您通过研究代码和帮助手册，很快就能学会使用Doxygen</p>

<p>如果您想深入研究Doxygen，比如markdown和代码无缝交互，插入HTML代码，定制HTML网页，CSS等功能，
请参考Doxygen帮助手册，里面有详细说明，如果学习过程中，遇到问题，欢迎和我交流，互相学习</p>

<hr />

<blockquote><p>Do one thing and do it well</p><footer><strong>Cedar</strong> <cite>QQ:819280802</cite></footer></blockquote>


<hr />

<h2>参考资料</h2>

<ol>
<li><p><a href="http://www.stack.nl/~dimitri/doxygen/index.html">Doxygen官网</a></p></li>
<li><p><a href="http://www.stack.nl/~dimitri/doxygen/manual/commands.html">Doxygen支持的命令</a></p></li>
<li><p><a href="http://www.ibm.com/developerworks/cn/aix/library/au-learningdoxygen/">IBM &ndash; 学习用doxygen生成源码文档</a></p></li>
</ol>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Cedar</span></span>

      








  


<time datetime="2014-03-21T22:02:07+08:00" pubdate data-updated="true">Mar 21<span>st</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/jiao-cheng-,doxygen/'>教程，Doxygen</a>
  
</span>


    </p>
    
      <div class="sharing">
<!-- Remove by cedar
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://cedar-renjun.github.io/blog/2014/03/21/learn-doxygen-in-10-minutes/" data-via="" data-counturl="http://cedar-renjun.github.io/blog/2014/03/21/learn-doxygen-in-10-minutes/" >Tweet</a>
  
  
  
  -->
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/03/21/how-to-be-stronger/" title="Previous Post: 王石：你没变强只因你一直很舒服">&laquo; 王石：你没变强只因你一直很舒服</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/03/22/review-about-tangjun/" title="Next Post: 关于唐骏的一点看法">关于唐骏的一点看法 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/03/22/review-about-tangjun/">关于唐骏的一点看法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/21/learn-doxygen-in-10-minutes/">Doxygen 10 分钟入门教程</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/21/how-to-be-stronger/">王石：你没变强只因你一直很舒服</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/21/ued-team-collection/">国内UED(User Experience Design)团队汇总</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/19/how-to-build-your-blog-on-github-page-with-octopress/">用Octopress在github上搭建自己的博客系统</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Cedar -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
